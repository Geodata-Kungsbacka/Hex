# =============================================================================
# GeoServer Schema Listener - Konfiguration
# =============================================================================
# Kopiera denna fil till .env och fyll i vardena.
# .env-filen ska ALDRIG committas till git.
#
# Alternativt kan alla variabler sattas som miljovariabler pa systemet,
# t.ex. via Windows System Properties > Environment Variables
# eller via en Windows-tjanst som konfigureras med nssm.
# =============================================================================

# --- PostgreSQL - delade standardvarden ---
# Dessa anvands som fallback om HEX_DB_N_HOST/PORT/USER/PASSWORD inte anges.
# Lyssnaren behover bara CONNECT-rattighet - anvand INTE postgres-kontot.
# Se SETUP.md Steg 3 for att skapa en dedikerad lyssnarroll.
HEX_PG_HOST=localhost
HEX_PG_PORT=5432
HEX_PG_USER=hex_listener
HEX_PG_PASSWORD=

# --- GeoServer REST API ---
# Kraver administratorsrattigheter i GeoServer - skapa en dedikerad anvandare.
# Se SETUP.md Steg 3 for att skapa ett dedikerat tjanstekonto.
HEX_GS_URL=http://localhost:8080/geoserver
HEX_GS_USER=hex_publisher
HEX_GS_PASSWORD=

# --- Databaser ---
# En grupp per PostgreSQL-databas som ska overvakas.
# Varje grupp har ett eget databasnamn och sina egna JNDI-kopplingar.
# HOST/PORT/USER/PASSWORD kan anges per databas om de skiljer sig fran ovan.

# Databas 1
HEX_DB_1_DBNAME=geodata_sk0
HEX_DB_1_JNDI_sk0=java:comp/env/jdbc/server.geodata_sk0
# HEX_DB_1_HOST=localhost          # (valfritt - overridar HEX_PG_HOST)
# HEX_DB_1_PORT=5432               # (valfritt - overridar HEX_PG_PORT)
# HEX_DB_1_USER=hex_listener       # (valfritt - overridar HEX_PG_USER)
# HEX_DB_1_PASSWORD=               # (valfritt - overridar HEX_PG_PASSWORD)

# Databas 2
HEX_DB_2_DBNAME=geodata_sk1
HEX_DB_2_JNDI_sk1=java:comp/env/jdbc/server.geodata_sk1

# Framtida databaser laggs till har:
# HEX_DB_3_DBNAME=geodata_sk3
# HEX_DB_3_JNDI_sk3=java:comp/env/jdbc/server.geodata_sk3

# --- Ateranslutningsintervall (sekunder) ---
HEX_RECONNECT_DELAY=5

# --- E-postnotifieringar (valfritt) ---
# Aktiveras genom att satta HEX_SMTP_TO. Om den ar tom ar e-post avaktiverat.
# Skickar notifieringar vid:
#   - Misslyckad schema-publicering till GeoServer (efter alla retry-forsok)
#   - Forlorad PostgreSQL-anslutning
#   - Ovantade fel i lyssnaren
#   - Lyckad ateranslutning efter avbrott
#
# Samma amne skickas max var 5:e minut for att undvika spam vid langvariga avbrott.
#
# HEX_SMTP_HOST=smtp.office365.com   # (standard: smtp.office365.com)
# HEX_SMTP_PORT=587                  # (standard: 587, STARTTLS)
# HEX_SMTP_USER=                     # Inloggning mot SMTP-servern
# HEX_SMTP_PASSWORD=                 # Losenord for SMTP-kontot
# HEX_SMTP_FROM=                     # (valfritt - standard: HEX_SMTP_USER)
# HEX_SMTP_TO=                       # Mottagare - satt denna for att aktivera
